+function(t){"use strict";function e(e){return this.each(function(){var s=t(this),i=s.data("bs.button"),n="object"==typeof e&&e;i||s.data("bs.button",i=new a(this,n)),"toggle"==e?i.toggle():e&&i.setState(e)})}var a=function(e,s){this.$element=t(e),this.options=t.extend({},a.DEFAULTS,s),this.isLoading=!1};a.VERSION="3.3.7",a.DEFAULTS={loadingText:"loading..."},a.prototype.setState=function(e){var a="disabled",s=this.$element,i=s.is("input")?"val":"html",n=s.data();e+="Text",null==n.resetText&&s.data("resetText",s[i]()),setTimeout(t.proxy(function(){s[i](null==n[e]?this.options[e]:n[e]),"loadingText"==e?(this.isLoading=!0,s.addClass(a).attr(a,a).prop(a,!0)):this.isLoading&&(this.isLoading=!1,s.removeClass(a).removeAttr(a).prop(a,!1))},this),0)},a.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var a=this.$element.find("input");"radio"==a.prop("type")?(a.prop("checked")&&(t=!1),e.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==a.prop("type")&&(a.prop("checked")!==this.$element.hasClass("active")&&(t=!1),this.$element.toggleClass("active")),a.prop("checked",this.$element.hasClass("active")),t&&a.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var s=t.fn.button;t.fn.button=e,t.fn.button.Constructor=a,t.fn.button.noConflict=function(){return t.fn.button=s,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(a){var s=t(a.target).closest(".btn");e.call(s,"toggle"),t(a.target).is('input[type="radio"], input[type="checkbox"]')||(a.preventDefault(),s.is("input,button")?s.trigger("focus"):s.find("input:visible,button:visible").first().trigger("focus"))}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){t(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})}(jQuery),function(t){t(document).ready(function(t){function e(){l&&clearTimeout(l),l=setTimeout(function(){jQuery("#cboxOverlay").is(":visible")&&jQuery.colorbox.resize({width:"90%",height:"90%"})},300)}function a(t,e){"previous"==t.className?e.forEach(function(t){t.setAttribute("data-offset",parseInt(t.getAttribute("data-offset"))+parseInt(1))}):"following"==t.className&&e.forEach(function(t){t.setAttribute("data-offset",t.getAttribute("data-offset")-1)})}function s(){var e=function(t){t.find("tr").removeClass("striped").filter(":visible:even").addClass("striped")};t("table.mz-schedule-filter").length?(t("table.mz-schedule-filter").filterTable({callback:function(t,a){e(a)},placeholder:mz_mindbody_schedule.filter_default,highlightClass:"alt",inputType:"search",label:mz_mindbody_schedule.label,selector:mz_mindbody_schedule.selector,quickListClass:"mz_quick_filter",quickList:[mz_mindbody_schedule.quick_1,mz_mindbody_schedule.quick_2,mz_mindbody_schedule.quick_3],locations:mz_mindbody_schedule.Locations_dict}),e(t("table.mz-schedule-filter"))):e(t("table.mz-schedule-table")),t(".mz_date_display").each(function(e,a){this.dataset.time&&Date.parse(this.dataset.time.replace(/-/g,"/").replace(/T/g," "))<Date.now()&&t(this).find("a").addClass("disabled")}),t(".grid-sign-up-button").each(function(e,a){this.dataset.time&&Date.parse(this.dataset.time.replace(/-/g,"/").replace(/T/g," "))<Date.now()&&t(this).addClass("disabled")}),t("a[data-target=mzStaffScheduleModal]").each(function(e,a){this.dataset.sub&&!this.dataset.marked_as_sub&&(t(this).after('&nbsp;<a href="#" title="'+mz_mindbody_schedule.sub_by_text+" "+this.dataset.sub+'" style="text-decoration:none;" onclick="return false"><svg height="20" width="20"><circle cx="10" cy="10" r="8" stroke="black" stroke-width="1" fill="white" /><text x="50%" y="50%" text-anchor="middle" fill="black" font-size="15px" font-family="Arial" dy=".25em">s</text></svg></a>'),this.dataset.marked_as_sub=!0)})}var i=mz_mindbody_schedule.nonce,n=mz_mindbody_schedule.atts,o=t("#mzScheduleDisplay");t.colorbox.settings.width=t(window).innerWidth()<=500?"95%":"75%",t.colorbox.settings.height="75%";var l;t(window).resize(e),window.addEventListener("orientationchange",e,!1),s(),t("#mzScheduleNavHolder .following, #mzScheduleNavHolder .previous").on("click",function(e){e.preventDefault(),o.children().each(function(e){t(this).html("")}),o.toggleClass("loader");var l=[].slice.call(document.getElementById("mzScheduleNavHolder").children);n.offset=this.dataset.offset;"following"==this.className?l.forEach(function(t){t.setAttribute("data-offset",parseInt(t.getAttribute("data-offset"))+parseInt(1))}):"previous"==this.className&&l.forEach(function(t){t.setAttribute("data-offset",t.getAttribute("data-offset")-1)}),t.ajax({type:"post",dataType:"json",context:this,url:mz_mindbody_schedule.ajaxurl,data:{action:"mz_display_schedule",nonce:i,atts:n},success:function(t){"success"==t.type?(o.toggleClass("loader"),t.grid&&t.horizontal?(document.getElementById("gridDisplay").innerHTML=t.grid,document.getElementById("horizontalDisplay").innerHTML=t.horizontal):t.grid?document.getElementById("gridDisplay").innerHTML=t.grid:document.getElementById("horizontalDisplay").innerHTML=t.horizontal,s()):(a(this,l),o.toggleClass("loader"),o.html(t.message),s())}}).fail(function(t){a(this,l),o.toggleClass("loader"),o.html("Sorry but there was an error retrieving schedule.")})}),t(document).on("click","a[data-target=mzModal]",function(e){e.preventDefault();var a=t(this).attr("href"),s=this.getAttribute("data-staffName"),i=decodeURIComponent(this.getAttribute("data-classDescription")),n="<h3>"+this.innerHTML+" "+mz_mindbody_schedule.staff_preposition+" "+s+"</h3>";void 0!==t(this).attr("data-sub")&&mz_mindbody_schedule.sub_by_text;return n+='<div class="mz-staffInfo" id="StaffInfo">'+i+"</div>",t("#mzModal").load(a,function(){t.colorbox({html:n,href:a}),t("#mzModal").colorbox()}),!1}),t(document).on("click","a[data-target=registrantModal]",function(e){e.preventDefault();var s=t(this).attr("href"),i=t(this).attr("data-classDescription"),n=t(this).attr("data-staffName"),o=t(this).attr("data-staffImage"),l=t(this).attr("data-className"),c=t(this).attr("data-classID"),d=t(this).attr("data-nonce"),r='<div class="mz-classInfo">';void 0!==t(this).attr("data-sub")&&mz_mindbody_schedule.sub_by_text;r+="<h3>"+l+"</h3>",r+="<h4>"+mz_mindbody_schedule.staff_preposition+" "+n+"</h4>",void 0!==o&&(r+='<img class="mz-staffImage" src="'+o+'" />');var u='<div class="mz_modalClassDescription">';return u+="<div class='class-description'>"+decodeURIComponent(i)+"</div></div>",r+=u,r+="</div>",r+="<h3>"+mz_mindbody_schedule.registrants_header+"</h3>",r+='<div id="modalRegistrants"><div id="ClassRegistrants" style="min-height:90px;">',r+='<i class="fa fa-spinner fa-3x fa-spin" style="position: fixed; top: 50%; left: 50%;"></i>',t("#registrantModal").load(s,function(){t.colorbox({html:r,href:s}),t("#registrantModal").colorbox()}),t.ajax({type:"GET",dataType:"json",url:mz_mindbody_schedule.ajaxurl,data:{action:"mz_mbo_get_registrants",nonce:d,classID:c},success:function(e){"success"==e.type?(htmlRegistrants='<ul class="mz-classRegistrants">',t.isArray(e.message)?e.message.forEach(function(t){htmlRegistrants+="<li>"+t.replace("_"," ")+"</li>"}):htmlRegistrants+="<li>"+e.message+"</li>",htmlRegistrants+="</ul>",t("#modalRegistrants").find("#ClassRegistrants")[0].innerHTML=htmlRegistrants):t("#modalRegistrants").find("#ClassRegistrants")[0].innerHTML=mz_mindbody_schedule.get_registrants_error}}).fail(function(e){a(this,buttons),console.log("fail"),console.log(e),t("#modalRegistrants").find("#ClassRegistrants")[0].innerHTML=mz_mindbody_schedule.get_registrants_error}),!1}),t(document).on("click","a[data-target=mzStaffScheduleModal]",function(e){e.preventDefault();var a=t(this).attr("href"),s=t(this).attr("data-staffID"),i=t(this).attr("data-siteID"),n=t(this).attr("data-staffName"),o=t(this).attr("data-nonce"),l=void 0!==t(this).attr("data-sub")?' <span class="sub-text">('+mz_mindbody_schedule.sub_by_text+" "+t(this).attr("data-sub")+") </span> ":" ",c="<h3>"+n+" "+l+'</h3><div class="mz-staffInfo" id="StaffInfo"></div>';c+='<i class="fa fa-spinner fa-3x fa-spin" style="position: fixed; top: 50%; left: 50%;"></i>',t("#mzStaffScheduleModal").load(a,function(){t.colorbox({html:c,href:a}),t("#mzStaffScheduleModal").colorbox()}),t.ajax({type:"GET",dataType:"json",url:mz_mindbody_schedule.ajaxurl,data:{action:"mz_mbo_get_staff",nonce:o,staffID:s,siteID:i},success:function(e){"success"==e.type?(t(".fa-spinner").remove(),t("#StaffInfo").html(e.message)):t("#StaffInfo").html("ERROR FINDING STAFF INFO")}}).fail(function(e){t("#StaffInfo").html("ERROR RETURNING STAFF INFO")})}),"0"!==mz_mindbody_schedule.mode_select&&(t("#mzScheduleNavHolder").first().append(t('<a id="mode-select" class="btn btn-xs mz-mode-select">'+mz_mindbody_schedule.initial+"</a>")),t("#mode-select").click(function(){t(".mz-schedule-display").each(function(e,a){t(a).toggleClass("mz_hidden"),t(a).toggleClass("mz_schedule_filter")}),s(),t("#mode-select").text(function(t,e){return e==mz_mindbody_schedule.initial?mz_mindbody_schedule.swap:mz_mindbody_schedule.initial})}))})}(jQuery),function(t){t(document).ready(function(t){function e(e){return Object.keys(e).forEach(function(a){t("#mzLogIn").append('<input type="hidden" name="'+a+'" value="'+e[a]+'" />')}),t("#mzLogInContainer")}var a=(mz_mindbody_schedule.nonce,mz_mindbody_schedule.atts),s=a.locations[0].toString(),i=a.account?a.account:mz_mindbody_schedule.account,n='<i class="fa fa-spinner fa-3x fa-spin" style="position: fixed; top: 50%; left: 50%;"></i>';t(document).on("click","a[data-target=mzSignUpModal]",function(a){a.preventDefault();var s=t(this).attr("href"),i=(t(this).attr("data-siteID"),t(this).attr("data-nonce")),n=t(this).attr("data-location"),o=t(this).attr("data-classID"),l=t(this).attr("data-className"),c=t(this).attr("data-staffName"),d=t(this).attr("data-time"),r='<div class="modal__header"><h3>'+mz_mindbody_schedule.your_account+"</h3></div>",u=d+" "+l+" "+mz_mindbody_schedule.staff_preposition+" "+c;if(0==t("[data-loggedMBO]").attr("data-loggedMBO")){u+=e({classID:o,className:l,staffName:c,classTime:d,location:n}).html()}else u+="<hr/>",u+='<button class="btn btn-primary" data-location="'+n+'" data-siteID="siteID" data-nonce="'+i+'" data-classID="'+o+'" id="signUpForClass">'+mz_mindbody_schedule.confirm_signup+"</button>";r+='<div class="mz-classRegister" id="classRegister">'+u+'</div><div id="registrationStatus"></div>',t("#mzSignUpModal").load(s,function(){t.colorbox({html:r,href:s}),t("#mzSignUpModal").colorbox()})}),t(document).on("click","#signUpForClass",function(e){e.preventDefault();var a=t(this).attr("data-siteID"),s=t(this).attr("data-nonce"),i=t(this).attr("data-location"),n=t(this).attr("data-classID");t(this).prop("disabled",!0).after('<i class="fa fa-spinner fa-3x fa-spin" style="position: fixed; top: 50%; left: 50%;"></i>'),t.ajax({type:"GET",dataType:"json",url:mz_mindbody_schedule.ajaxurl,context:this,data:{action:"mz_register_for_class",nonce:s,siteID:a,classID:n,location:i},success:function(e){t(this).remove(),t(".fa-spinner").remove(),"success"==e.type?t("#registrationStatus").html(e.message):(t("#registrationStatus").html("ERROR REGISTERING FOR CLASS. "+e.message),console.log(e))}}).fail(function(e){t("#registrationStatus").html("ERROR REGISTERING FOR CLASS. "+e.message),console.log(e)})}),t(document).on("submit",'form[id="mzLogIn"]',function(a){a.preventDefault();var i=t(this),o=(i.serializeArray(),{});t.each(t("form").serializeArray(),function(){o[this.name]=this.value}),t("#classRegister").html(n),t.ajax({dataType:"json",url:mz_mindbody_schedule.ajaxurl,type:i.attr("method"),context:this,data:{action:"mz_client_log_in",form:i.serialize(),nonce:o.nonce,classID:o.classID,staffName:o.staffName,classTime:o.classTime,staffName:o.staffName,location:o.location},success:function(a){var i=(t(this).serializeArray(),{});t.each(t("form").serializeArray(),function(){i[this.name]=this.value});var n=i.classTime+" "+i.className+" "+mz_mindbody_schedule.staff_preposition+" "+i.staffName;if("success"==a.type)t("#classRegister").html(a.message),t("[data-loggedMBO]").attr("data-loggedMBO",1),n+="<hr/>",n+='<button class="btn btn-primary" data-nonce="'+i.nonce+'" data-location="'+i.location+'" data-classID="'+i.classID+'" id="signUpForClass">'+mz_mindbody_schedule.confirm_signup+"</button>";else{var o=e({classID:i.classID,className:i.className,staffName:i.staffName,classTime:i.classTime,location:s});n+="<hr/>"+a.message+o.html()}t("#classRegister").html(n)}}).fail(function(e){t("#classRegister").html("ERROR SIGNING IN"),console.log(e)})}),t(document).on("submit",'form[id="mzSignUp"]',function(e){e.preventDefault();var a=(t(this).attr("href"),t(this)),s=(t(this).attr("data-nonce"),t(this).attr("data-classID"),a.serializeArray());t("#classRegister").html(n),t.ajax({type:"GET",dataType:"json",url:mz_mindbody_schedule.ajaxurl,data:{action:"mz_create_mbo_account",nonce:s.nonce,classID:s.classID,form:a.serialize()},success:function(e){"success"==e.type?(t(".fa-spinner").remove(),t("#classRegister").html(e.message),t("[data-loggedMBO]").attr("data-loggedMBO",1)):(t("#classRegister").html("ERROR CREATING ACCOUNT"),console.log(e))}}).fail(function(e){t("#classRegister").html("ERROR CREATING ACCOUNT"),console.log(e)})}),t(document).on("click","a#createMBOAccount",function(e){e.preventDefault();var a=(t(this).attr("href"),t(this).attr("data-nonce")),s=t(this).attr("data-classID");t("#classRegister").html(n),t.ajax({type:"GET",dataType:"json",url:mz_mindbody_schedule.ajaxurl,data:{action:"mz_generate_signup_form",nonce:a,classID:s},success:function(e){"success"==e.type?(t(".fa-spinner").remove(),t("#classRegister").html(e.message)):(t("#classRegister").html("ERROR GENERATING SIGN-UP FORM"),console.log(e))}}).fail(function(e){t("#classRegister").html("ERROR GENERATING THE SIGN-UP FORM"),console.log(e)})}),t(document).on("click","a#MBOSchedule",function(e){e.preventDefault();var a=t(this).attr("data-nonce");t("#AddedToClass").html(n),t.ajax({type:"GET",dataType:"json",url:mz_mindbody_schedule.ajaxurl,data:{action:"mz_display_client_schedule",nonce:a,location:s,siteID:i},success:function(e){"success"==e.type?t("#AddedToClass").html(e.message):(t("#AddedToClass").html("ERROR RETRIEVING YOUR SCHEDULE"),console.log(e))}}).fail(function(e){t("#AddedToClass").html("ERROR RETRIEVING YOUR SCHEDULE"),console.log(e)})}),t(document).on("click","#MBOLogout",function(e){e.preventDefault(),t("#classRegister").html(n),t.ajax({dataType:"json",url:mz_mindbody_schedule.ajaxurl,data:{action:"mz_client_log_out"},success:function(e){"success"==e.type?t("#classRegister").html(e.message):(t("#classRegister").html("ERROR LOGGING OUT"),console.log(e))}}).fail(function(e){t("#classRegister").html("ERROR LOGGING OUT"),console.log(e)})})})}(jQuery);
//# sourceMappingURL=schedule-display.js.map
